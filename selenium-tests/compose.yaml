# (C) Copyright 2024-2025 Dassault Systemes SE.  All Rights Reserved.

services:
  selenium:
    image: "selenium/standalone-chrome:131.0"
    shm_size: '2gb'
    ports:
      - "4444:4444"
      - "7900:7900"
    depends_on:
      - nginx
    networks:
      - kind
    environment:
      - SE_VNC_NO_PASSWORD=true
    healthcheck:
      test: curl --fail http://selenium:4444/ || exit 1
      interval: 5s
      timeout: 30s
      retries: 3
      start_period: 60s
  nginx:
    image: "nginx"
    network_mode: host
    volumes:
      - ./files/nginx-default.conf:/etc/nginx/conf.d/default.conf
    healthcheck:
      test: curl --fail http://localhost:81/ || exit 1
      interval: 5s
      timeout: 30s
      retries: 3
      start_period: 60s
networks:
  kind:
    name: kind
    external: true
